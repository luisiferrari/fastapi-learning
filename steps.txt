For any change on DB, if changing columns, tables or whatever, I'm using alembic (pip install alembic) -> https://alembic.sqlalchemy.org/en/latest/
alembic comands:
    after making a change to the model, create a version (something as a commit) -> alembic revision --autogenerate -m "<YOUR MESSAGE HERE>"
    once you checked the new version python file (the one with the upgrade and downgrade functions) -> alembic upgrade head (or downgrade if you want to rollback)

    stoped in :https://youtu.be/TO4aQ3ghFOc?t=22060

#To generate a secret for JWT:
    import secrets      
    secrets.token_hex(16)

docker run -d --name memos  -p 5230:5230 -v ~/.memos:/var/opt/memos neosmemo/memos:stable


Então:
    * Tenho um arquivo utils.py onde crio a lógica de criação do token, verificação do hash da senha, geração do hash da senha e decodificação do token jwt.
    * tenho  um file dependencies que é onde eu herdo a classe do fastapi que me permite pegar os headers e o payload, para pegar o toke, e então checa-lo
    * no serviço de /login, eu checo usando a verificação de hash, se a senha está certa, e se sim, crio o access e refresh token, retornando no payload para o client.

{
  "email": "auth@mail.com",
  "password": "123456"
}

Instalando redis:

docker run -d --name redis-auth -p 6379:6379 redis:7